<form class="form" [formGroup]="userForm" (ngSubmit)="onSubmit()" >
    @switch (selectedSection) {
        @case(SECTIONS.PERSONAL){
            <div  [@slideFadeAnimation]="{value: false, params: {transition:   isRightButtonClick? '100%': '-100%'} }" >
    
       
  
                <div class="form-group">
                    <label for="name">First Name</label>
                    <input type="text" class="form-control" 
                     [ngClass]="{'form-control--invalid': userForm.get('firstName')?.invalid && userForm.get('firstName')?.touched}"
                      id="name" placeholder="Enter name" formControlName="firstName">
                    <span  *ngIf="userForm.get('firstName')?.invalid && userForm.get('firstName')?.touched " class="error-message" >
                        {{ userForm.get('firstName')?.getError('errorMessage') ?? 'FirstName most contain min 2 and max 50 letters' }} 
                    </span>
                </div>
                <div class="form-group">
                    <label class="form-label" for="lastName">Last Name</label>
                    <input type="text" class="form-control" id="lastName" placeholder="Enter Last Name"
                    [ngClass]="{'form-control--invalid': userForm.get('lastName')?.invalid && userForm.get('firstName')?.touched}"
                    formControlName="lastName">
                    <span  *ngIf="userForm.get('lastName')?.invalid && userForm.get('lastName')?.touched " class="error-message" >
                        {{ userForm.get('lastName')?.getError('errorMessage') ?? 'lastName most contain min 2 and max 50 letters' }} 
                    </span>
                </div>
                <div class="form-group">
                    <label for="gender">Gender</label>
                    <select id="gender" class="form-control" formControlName="gender" >
                        <option value="male">Male</option>
                        <option value="female">Female</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="number">Id Number</label>
                    <input            [ngClass]="{'form-control--invalid': userForm.get('personalId')?.invalid && userForm.get('personalId')?.touched}"
                     type="text" class="form-control" id="number" formControlName="personalId" placeholder="ID number">
                    <span  *ngIf="userForm.get('personalId')?.invalid && userForm.get('personalId')?.touched " class="error-message" >
                        {{  'Personal ID must container 11 numbers' }} 
                    </span>
                </div>
               
            </div>
        }
        @case (SECTIONS.LEGAL_ADDRESS) {
            <div  [@slideFadeAnimation]="{value: false, params:{transition:   isRightButtonClick? '100%': '-100%'} }"  >
               
                <div formGroupName="legalAddress" class="form-group">
                    <label for="legalCountry">Country</label>
                    <input  
                    [ngClass]="{'form-control--invalid': userForm.get('legalAddress.country')?.invalid && userForm.get('legalAddress.country')?.touched}"
                    type="text" class="form-control" id="legalCountry" placeholder="Enter legal address" formControlName="country" >
                    <span  *ngIf="userForm.get('legalAddress.country')?.invalid && userForm.get('legalAddress.country')?.touched " class="error-message" >
                        {{ 'Country is required' }} 
                    </span>
               
                </div>
                <div formGroupName="legalAddress"  class="form-group">
                    <label for="legalCity">City</label>
                    <input
                    [ngClass]="{'form-control--invalid': userForm.get('legalAddress.city')?.invalid && userForm.get('legalAddress.city')?.touched}"
                    type="text" class="form-control" id="legalCity" placeholder="Enter legal address" formControlName="city" >
                    <span  *ngIf="userForm.get('legalAddress.city')?.invalid && userForm.get('legalAddress.city')?.touched " class="error-message" >
                        {{ 'City is required' }} 
                    </span>
                </div>
                <div formGroupName="legalAddress" class="form-group">
                    <label for="legalAddress">Address</label>
                    <input 
                    [ngClass]="{'form-control--invalid': userForm.get('legalAddress.address')?.invalid && userForm.get('legalAddress.address')?.touched}"
                    type="text" class="form-control" id="legalAddress" placeholder="Enter legal address" formControlName="address" >
                    <span  *ngIf="userForm.get('legalAddress.address')?.invalid && userForm.get('legalAddress.address')?.touched " class="error-message" >
                        {{ 'Address is required' }} 
                    </span>
                </div>
                <div  class="form-group">
                    <label for="phone">Phone Number</label>
                    <input 
                    [ngClass]="{'form-control--invalid': userForm.get('phoneNumber')?.invalid && userForm.get('phoneNumber')?.touched}"
                    type="text" class="form-control" id="phone" placeholder="Phone Number" formControlName="phoneNumber" >
              
                    <span  *ngIf="userForm.get('phoneNumber')?.invalid && userForm.get('phoneNumber')?.touched " class="error-message" >
                        {{ userForm.get('phoneNumber')?.getError('errorMessage') ?? 'Phone number must include 9 number' }} 
                    </span>
                </div>
            </div>
        }
        @case (SECTIONS.FACTUAL_ADDRESS) {
            <div  [@slideFadeAnimation]="{value: false, params: {transition:   isRightButtonClick? '100%': '-100%'} }"   >
            <ng-container formGroupName="factualAddress" >
                <div class="form-group">
                    <label for="FactualCountry">Country</label>
                    <input 
                    [ngClass]="{'form-control--invalid': userForm.get('factualAddress.country')?.invalid && userForm.get('factualAddress.country')?.touched}"
                    type="text" class="form-control" id="FactualCountry" placeholder="Enter factual Country" formControlName="country" >
                    <span  *ngIf="userForm.get('factualAddress.country')?.invalid && userForm.get('factualAddress.country')?.touched " class="error-message" >
                        {{ 'Country is required' }} 
                    </span>
                </div>
                <div class="form-group">
                    <label for="FactualCity">City</label>
                    <input
                    [ngClass]="{'form-control--invalid': userForm.get('factualAddress.city')?.invalid && userForm.get('factualAddress.city')?.touched}"
                    type="text" class="form-control" id="FactualCity" placeholder="Enter factual City" formControlName="city" >
                    <span  *ngIf="userForm.get('factualAddress.city')?.invalid && userForm.get('factualAddress.city')?.touched " class="error-message" >
                        {{ 'City is required' }} 
                    </span>
                </div>
                <div class="form-group">
                    <label for="factualAddress">Address</label>
                    <input 
                    [ngClass]="{'form-control--invalid': userForm.get('factualAddress.address')?.invalid && userForm.get('factualAddress.address')?.touched}"
                    type="text" class="form-control" id="factualAddress" placeholder="Enter factual address" formControlName="address" >
                    <span  *ngIf="userForm.get('factualAddress.address')?.invalid && userForm.get('factualAddress.address')?.touched " class="error-message" >
                        {{ 'Address is required' }} 
                    </span>
                </div>
            </ng-container>
                <div class="form-group">
                    <label for="photo">Upload Photo</label>
                    <input type="file" class="form-control-file" id="photo" formControlName="photo" >
                </div>
            </div>
           
        }
        @default {
            <h1>Please Provide Valid Form Type</h1>
        }
           
    }
 

   <div class="form__buttons" >
   

    <button (click)="onNextClick($event)" [disabled]="nextIsDisabled" [ngClass]="{'form-btn--disabled': nextIsDisabled}"  class="form-btn form-btn--secondary ">Next</button>
    @if(selectedSection !== SECTIONS.PERSONAL){
        <button (click)="onPrevClick($event)" class="form-btn form-btn--secondary ">Prev</button>

    }
    @if (editUser) {
        <button type="button" (click)="onDeleteUser()"  class="form-btn  form-btn--delete">Delete</button>

        <button type="submit" [disabled]="!userForm.dirty" [ngClass]="{'form-btn--disabled': !userForm.dirty}" class="form-btn ">UPDATE</button>

    }@else {
        <button type="submit" [disabled]="!userForm.valid" [ngClass]="{'form-btn--disabled': !userForm.valid}" class="form-btn ">Submit</button>

    }
   </div>
    
<div class="form__status" >
    <div class="form__status-bar" >
   
        <lib-status-bar [secondPage]="selectedSection===SECTIONS.LEGAL_ADDRESS" [lastPage]="selectedSection===SECTIONS.FACTUAL_ADDRESS"  ></lib-status-bar>
    </div>
</div>

    
</form>
